/* -----------------------------------------------------------
   Signin.module.css (Final Full Version - Fixed Responsive)
   ----------------------------------------------------------- */

/* ========================================= */
/* === 1. GLOBAL & RESET === */
/* ========================================= */
* { 
    box-sizing: border-box; 
}

:root { 
    /* Palette สีหลัก */
    --color-primary: #28a745;   /* สีเขียว (Solid Green) */
    --color-danger: #dc3545;    /* สีแดง (Solid Red) */
    --color-warning: #f59e0b;   /* สีส้มเหลือง (ปุ่มแก้ไข) */
    
    /* Text & Border */
    --color-text-main: #333333;
    --color-text-sub: #555555;
    --color-border: #e0e0e0;
    
    /* Backgrounds */
    --bg-page: #fafafa;
    --bg-card: #ffffff;
}

/* ========================================= */
/* === 2. MAIN SETTINGS CONTAINER === */
/* ========================================= */
.settingsContainer { 
    width: 100%; 
    max-width: 700px; 
    display: flex; 
    flex-direction: column; 
    gap: 24px; 
    margin: 0 auto; 
    font-family: 'Kanit', sans-serif; /* แนะนำฟอนต์ Kanit หรือตามธีมเว็บ */
}

.settingsSection { 
    width: 100%; 
    background: var(--bg-card); 
    border: 1px solid var(--color-border); 
    border-radius: 24px; /* ความโค้งกล่องหลัก */
    padding: 24px 28px; 
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.03); 
    max-width: 100%;
}

.settingsTitle { 
    font-size: 18px; 
    font-weight: 700; 
    color: #111; 
    margin: 0 0 20px 0; 
    padding-bottom: 12px; 
    border-bottom: 1px solid #f0f0f0; 
    display: flex; 
    align-items: center; 
    flex-wrap: wrap; 
}

.settingsSubtitle { 
    font-size: 14px; 
    color: var(--color-text-sub); 
    margin: -12px 0 16px 0; 
}

.settingsItem { 
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
    padding: 14px 0; 
    border-bottom: 1px solid #f5f5f5; 
}

.settingsItemText { 
    display: flex; 
    align-items: center; 
    gap: 12px; 
    font-size: 15px; 
    font-weight: 600; 
    color: var(--color-text-main); 
}

/* ========================================= */
/* === 3. INPUTS & DROPDOWNS (PILL SHAPE) === */
/* ========================================= */
.settingsSection select,
.filterGroup select {
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    display: block;
    width: 100%;
    height: 48px; 
    padding: 10px 40px 10px 20px; 
    margin-top: 8px; 
    margin-bottom: 12px;
    background-color: #ffffff;
    border: 1px solid #d1d5db;
    border-radius: 50px; /* ทรงแคปซูล */
    font-size: 15px;
    color: #333;
    font-family: inherit;
    cursor: pointer;
    transition: all 0.2s ease;
    background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23555' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-position: right 18px center;
    background-size: 16px;
}

.settingsSection select:hover,
.filterGroup select:hover {
    border-color: var(--color-primary); 
}

.settingsSection select:focus,
.filterGroup select:focus {
    outline: none;
    border-color: var(--color-primary);
    box-shadow: 0 0 0 3px rgba(40, 167, 69, 0.15); 
}

.searchInput { 
    width: 100%; 
    padding: 12px 20px; 
    border-radius: 50px; /* ทรงแคปซูล */
    border: 1px solid #ccc; 
    font-size: 14px; 
    background-color: #fff; 
    outline: none;
}
.searchInput:focus {
    border-color: var(--color-primary);
}

/* ========================================= */
/* === 4. FILTER / HEADER / QR FORM === */
/* ========================================= */
.settingsHeaderDropdown { 
    width: 100%; 
    background: #fff; 
    border: 1px solid #f0f0f0; 
    border-radius: 24px; 
    padding: 20px 24px; 
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    display: flex;
    flex-wrap: wrap; 
    gap: 12px;
    align-items: center;
}

.filterGroup { 
    flex: 1 1 auto; 
    display: flex; 
    flex-direction: column; 
    gap: 6px; 
    min-width: 150px; 
}

/* ปุ่ม Filter ทั่วไป */
.filterApplyButton { 
    padding: 12px 24px; 
    font-size: 15px; 
    font-weight: 700; 
    color: #fff; 
    background-color: var(--color-primary); 
    border: none; 
    border-radius: 50px; /* ทรงแคปซูล */
    cursor: pointer; 
    text-align: center; 
    white-space: nowrap;
    transition: background-color 0.2s;
}
.filterApplyButton:hover { 
    background-color: #218838; 
}

/* --- QR Code Section --- */
.qrCodePlaceholder { 
    width: 100%; 
    min-height: 250px; 
    background: #f9f9f9; 
    border: 2px dashed #e0e0e0; 
    border-radius: 24px; 
    display: flex; 
    flex-direction: column; 
    align-items: center; 
    justify-content: center; 
    gap: 12px; 
    color: #aaa; 
    margin-bottom: 20px; 
}
.mockQrIcon { font-size: 80px; color: #e0e0e0; }

.qrForm { 
    display: flex; 
    flex-direction: column; 
    gap: 16px; 
}

/* ปุ่มสร้าง QR Code ขยายเต็ม 100% ให้เท่ากับ Input ด้านบน */
.qrForm .filterApplyButton {
    width: 100%;              /* เต็มความกว้าง */
    margin-top: 10px;
    box-shadow: 0 4px 10px rgba(40, 167, 69, 0.25);
}

/* ========================================= */
/* === 5. AGENCY CARD STYLES === */
/* ========================================= */
.agencyViewContainer { 
    display: flex; 
    flex-direction: column; 
    gap: 20px; 
    animation: fadeInAgency 0.3s; 
}

.agencyProfileCard { 
    background: #fff; 
    border: 1px solid var(--color-border); 
    border-radius: 24px; 
    padding: 24px; 
    display: flex; 
    flex-direction: column; 
    gap: 20px; 
    box-shadow: 0 4px 12px rgba(0,0,0,0.03); 
    max-width: 100%; 
    overflow: hidden; 
}

.agencyProfileHeader { 
    display: flex; 
    gap: 20px; 
    align-items: flex-start; 
    width: 100%; 
}

.agencyLogoCircle { 
    width: 80px; 
    height: 80px; 
    flex-shrink: 0; 
    background: #f0f0f0; 
    border-radius: 50%; 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    font-size: 30px; 
    color: #bbb; 
    border: 3px solid #fff; 
    box-shadow: 0 2px 8px rgba(0,0,0,0.1); 
    overflow: hidden; 
}

.agencyOrgName { 
    margin: 0 0 8px 0; 
    font-size: 22px; 
    color: #333; 
    line-height: 1.4; 
    word-break: break-word; 
}

.agencyBadges { 
    display: flex; 
    gap: 8px; 
    align-items: center; 
    flex-wrap: wrap; 
}

.agencyBadgeType { 
    background: #f1f3f5; 
    color: #495057; 
    padding: 4px 12px; 
    border-radius: 50px; 
    font-size: 13px; 
    font-weight: 600; 
    display: flex; 
    align-items: center; 
    gap: 5px; 
}

.agencyBtnEditWarning { 
    padding: 10px 24px; 
    border-radius: 50px; 
    border: none; 
    background: var(--color-warning); 
    color: #fff; 
    cursor: pointer; 
    display: flex; 
    gap: 8px; 
    align-items: center; 
    justify-content: center; 
    font-weight: 700; 
    transition: all 0.2s; 
    box-shadow: 0 2px 5px rgba(245, 158, 11, 0.3); 
    font-size: 14px; 
    width: 100%; 
    white-space: nowrap; 
}
.agencyBtnEditWarning:hover { 
    background: #d97706; 
    transform: translateY(-1px); 
}

@media (min-width: 600px) { 
    .agencyBtnEditWarning { width: fit-content; align-self: flex-end; } 
}

.agencyInfoGrid { 
    display: grid; 
    grid-template-columns: 1fr 1fr; 
    gap: 20px; 
}

.agencyInfoBox { 
    background: #fff; 
    border: 1px solid #e0e0e0; 
    border-radius: 24px; 
    padding: 20px; 
    overflow: hidden; 
}

.agencyBoxHeader { 
    font-weight: 700; 
    color: #333; 
    margin-bottom: 15px; 
    display: flex; 
    gap: 8px; 
    align-items: center; 
    font-size: 15px; 
}
.agencyDataRow { 
    display: flex; 
    justify-content: space-between; 
    font-size: 14px; 
    margin-bottom: 8px; 
    border-bottom: 1px dashed #eee; 
    padding-bottom: 6px; 
}

.codeRevealGroup { display: flex; align-items: center; gap: 10px; }
.iconBtnEye { background: none; border: none; color: #6c757d; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 16px; padding: 8px; border-radius: 50%; transition: all 0.2s; }
.iconBtnEye:hover { color: #0d6efd; background-color: #f0f8ff; }
.iconBtnCopy { background: none; border: none; color: #6c757d; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 15px; padding: 8px; border-radius: 50%; transition: all 0.2s; margin-left: 8px; }
.iconBtnCopy:hover { color: var(--color-primary); background-color: #e8f5e9; }

.agencyCodeFont { 
    font-family: monospace; 
    font-size: 15px; 
    letter-spacing: 1px; 
    color: #333; 
    text-align: left; 
}

/* ========================================= */
/* === 6. MODAL & FORM STYLES === */
/* ========================================= */
.agencyModalBackdrop { 
    position: fixed; top: 0; left: 0; 
    width: 100%; height: 100%; 
    background: rgba(0,0,0,0.6); 
    z-index: 3000; 
    backdrop-filter: blur(3px); 
}

.agencyModalContainer { 
    position: fixed; top: 50%; left: 50%; 
    transform: translate(-50%, -50%); 
    background: #fff; 
    width: 90%; 
    max-width: 550px; 
    max-height: 90vh; 
    border-radius: 24px; 
    box-shadow: 0 15px 40px rgba(0,0,0,0.25); 
    z-index: 3001; 
    display: flex; 
    flex-direction: column; 
}

.agencyModalHeader { 
    padding: 16px 24px; 
    border-bottom: 1px solid #eee; 
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
    background: #fff; 
    border-radius: 24px 24px 0 0; 
}

.agencyModalTitle { margin: 0; font-size: 18px; color: #111; font-weight: 700; }

.agencyBtnCloseRed { 
    background: var(--color-danger); 
    border: none; 
    font-size: 22px; 
    color: white; 
    cursor: pointer; 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    width: 40px; 
    height: 40px; 
    border-radius: 50%; 
    transition: background-color 0.2s; 
    box-shadow: 0 2px 6px rgba(220, 53, 69, 0.4); 
}
.agencyBtnCloseRed:hover { 
    background: #bb2d3b; 
    transform: none; 
}

.agencyModalBody { padding: 24px; overflow-y: auto; flex: 1; }

.agencyImageSection { 
    display: flex; flex-direction: column; align-items: center; 
    gap: 10px; padding-bottom: 24px; 
    border-bottom: 1px dashed #e0e0e0; 
    margin-bottom: 20px; 
}
.agencyImageCircle { 
    width: 90px; height: 90px; 
    background: #f8f9fa; 
    border-radius: 50%; 
    position: relative; 
    display: flex; align-items: center; justify-content: center; 
    border: 2px dashed #ccc; 
    transition: all 0.2s; cursor: pointer; 
}
.agencyImageCircle:hover { border-color: var(--color-primary); background: #e8f5e9; }
.uploadedLogo { width: 100%; height: 100%; object-fit: cover; border-radius: 50%; }
.agencyEditOverlay { 
    position: absolute; bottom: -5px; right: -5px; 
    background: var(--color-warning); 
    color: #fff; 
    width: 28px; height: 28px; 
    border-radius: 50%; 
    display: flex; align-items: center; justify-content: center; 
    border: 2px solid #fff; 
    box-shadow: 0 2px 4px rgba(0,0,0,0.15); 
    z-index: 10; 
}
.agencyHint { font-size: 12px; color: #999; }

.agencyFormContainer { display: flex; flex-direction: column; gap: 14px; }
.agencySectionTitle { 
    font-size: 14px; 
    font-weight: 700; 
    color: var(--color-primary); 
    margin: 5px 0 0 0; 
    display: flex; align-items: center; gap: 6px; 
    text-transform: uppercase; letter-spacing: 0.5px; 
}

.agencyFormGroup { display: flex; flex-direction: column; gap: 6px; }
.agencyLabel { font-size: 13px; font-weight: 600; color: #444; }

.agencyInput { 
    width: 100%; 
    padding: 12px 20px; 
    border: 1px solid #d1d5db; 
    border-radius: 50px; /* ทรงแคปซูล */
    font-size: 14px; 
    background: #fff; 
    transition: border 0.2s; 
}
.agencyInput:focus { 
    outline: none; 
    border-color: var(--color-primary); 
    box-shadow: 0 0 0 3px rgba(40, 167, 69, 0.15); 
}

.agencyInputCode { 
    width: 100%; 
    padding: 12px 20px; 
    border: 1px solid #d1d5db; 
    border-radius: 50px; 
    font-size: 15px; 
    font-family: monospace; 
    background: #f8f9fa; 
    color: #333; 
    font-weight: 600; 
    letter-spacing: 1px; 
    text-align: left; 
}

.agencyRow2 { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
.agencyAddressGrid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; }
.agencyDivider { height: 1px; background: #f0f0f0; margin: 10px 0; }
.req { color: var(--color-danger); }

.agencyModalFooter { 
    padding: 16px 24px; 
    border-top: 1px solid #eee; 
    display: flex; 
    justify-content: flex-end; 
    gap: 12px; 
    background: #fff; 
    border-radius: 0 0 24px 24px; 
}

.agencyBtnCancel { 
    padding: 10px 24px; 
    border-radius: 50px; 
    border: none; 
    background: var(--color-danger); 
    color: #fff; 
    cursor: pointer; 
    font-weight: 600; 
    font-size: 14px; 
    transition: all 0.2s; 
}
.agencyBtnCancel:hover { background: #bb2d3b; }

.agencyBtnSave { 
    padding: 10px 24px; 
    border-radius: 50px; 
    border: none; 
    background: var(--color-primary); 
    color: #fff; 
    cursor: pointer; 
    font-weight: 600; 
    font-size: 14px; 
    transition: all 0.2s; 
    box-shadow: 0 4px 10px rgba(40, 167, 69, 0.2); 
}
.agencyBtnSave:hover { 
    background: #218838; 
    transform: translateY(-1px); 
}

/* Modal Filter เล็กๆ */
.filterModalBackdrop { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); z-index: 1999; backdrop-filter: blur(4px); }
.filterModal { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 2000; background: #ffffff; border-radius: 24px; width: 90%; max-width: 400px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1); display: flex; flex-direction: column; }
.filterModalHeader { display: flex; justify-content: space-between; align-items: center; padding: 12px 18px; border-bottom: 1px solid #f0f0f0; }
.filterModalClose { background: var(--color-danger); border: none; border-radius: 50%; width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; cursor: pointer; color: #fff; }
.filterModalContent { padding: 20px; display: flex; flex-direction: column; gap: 16px; }

/* Toggle Switch */
.mockToggle { position: relative; display: inline-block; width: 50px; height: 28px; }
.mockToggle input { opacity: 0; width: 0; height: 0; }
.mockSlider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: 0.4s; border-radius: 28px; }
.mockSlider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 4px; bottom: 4px; background-color: white; transition: 0.4s; border-radius: 50%; }
.mockToggle input:checked + .mockSlider { 
    background-color: var(--color-primary); 
}
.mockToggle input:checked + .mockSlider:before { transform: translateX(22px); }

@keyframes fadeInAgency { from{opacity:0; transform:translateY(5px);} to{opacity:1; transform:translateY(0);} }

/* ========================================= */
/* === 7. MOBILE RESPONSIVE FIXES (UPDATED) === */
/* ========================================= */
@media screen and (max-width: 600px) {
    /* ปรับ Container หลักให้มีระยะห่างจากขอบจอเล็กน้อย */
    .settingsContainer {
        width: 100% !important;
        margin: 0 auto !important;
        padding: 10px 10px !important; /* เพิ่มช่องว่างด้านนอกซ้ายขวา */
        box-sizing: border-box !important;
    }

    /* ปรับกล่อง Card */
    .settingsSection {
        width: 100% !important;
        padding: 20px 16px !important; 
        box-sizing: border-box !important;
        /* ลบ overflow-x: hidden ออก เพื่อไม่ให้กินขอบเงา (Shadow) เวลา Focus */
        overflow: visible !important; 
        height: auto !important;
    }

    /* ปรับส่วน Header/Filter ให้เรียงแนวตั้ง */
    .settingsHeaderDropdown {
        display: flex !important;
        flex-direction: column !important;
        width: 100% !important;
        padding: 20px 16px !important;
        height: auto !important;
        gap: 16px !important; /* เพิ่มระยะห่างระหว่าง Input */
    }

    /* บังคับให้ Group เต็มความกว้าง */
    .filterGroup, .agencyFormGroup {
        width: 100% !important;
        margin-bottom: 0 !important; /* ใช้ gap ของ parent แทน */
        display: block !important;
    }

    /* *** สำคัญ: แก้ไข Input/Select บนมือถือ *** */
    .settingsSection select, 
    .filterGroup select, 
    .searchInput, 
    .agencyInput,
    .agencyInputCode {
        width: 100% !important;
        max-width: 100% !important;
        box-sizing: border-box !important;
        
        /* เพิ่มเป็น 16px เพื่อป้องกัน iPhone ซูมหน้าจออัตโนมัติ */
        font-size: 16px !important; 
        
        height: 48px !important;
        margin-top: 5px !important;
        margin-bottom: 5px !important;
        background-position: right 16px center !important; /* ขยับลูกศรให้สมดุล */
    }

    /* ปรับ Layout ภายใน Card ข้อมูลหน่วยงาน */
    .agencyViewContainer, 
    .agencyInfoGrid, 
    .agencyRow2, 
    .agencyAddressGrid,
    .agencyProfileHeader { 
        display: flex !important;
        flex-direction: column !important;
        gap: 16px !important;
    }
    
    .agencyProfileHeader {
        align-items: center !important;
        text-align: center !important;
    }

    .agencyBtnEditWarning {
        width: 100% !important;
        justify-content: center !important;
    }

    .agencyModalContainer { 
        width: 95% !important; 
        max-height: 90vh !important; 
    }
}
